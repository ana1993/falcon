<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2018-03-12
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20180312" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Falcon - Hive Mirroring</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<script type="text/javascript">$( document ).ready( function() { $( '.carousel' ).carousel( { interval: 3500 } ) } );</script>
          
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../index.html" id="bannerLeft">
                                                                                                <img src="images/falcon-logo.png"  alt="Apache Falcon" width="200px" height="45px"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://www.apache.org" id="bannerRight">
                                                                                                <img src="images/apache-feather-tm.gif"  alt="Falcon" height="45px"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="http://www.apache.org" class="externalLink" title="Apache">
        Apache</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="index.html" title="Falcon">
        Falcon</a>
        </li>
      <li class="divider ">/</li>
        <li class="">Hive Mirroring</li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2018-03-12</li> 
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Falcon</li>
                                
      <li>
    
                          <a href="index.html" title="About">
          <i class="none"></i>
        About</a>
            </li>
                  
      <li>
    
                          <a href="slides/falcon-overview.html" title="Overview">
          <i class="none"></i>
        Overview</a>
            </li>
                  
      <li>
    
                          <a href="slides/falcon-user-guide.html" title="User Guide">
          <i class="none"></i>
        User Guide</a>
            </li>
                  
      <li>
    
                          <a href="GettingStarted.html" title="Getting Started">
          <i class="none"></i>
        Getting Started</a>
            </li>
                  
      <li>
    
                          <a href="FalconDocumentation.html" title="Architecture">
          <i class="none"></i>
        Architecture</a>
            </li>
                  
      <li>
    
                          <a href="InstallationSteps.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                  
      <li>
    
                          <a href="OnBoarding.html" title="On Boarding">
          <i class="none"></i>
        On Boarding</a>
            </li>
                  
      <li>
    
                          <a href="MigrationInstructions.html" title="Migrate to 0.10">
          <i class="none"></i>
        Migrate to 0.10</a>
            </li>
                  
      <li>
    
                          <a href="Operability.html" title="Operability">
          <i class="none"></i>
        Operability</a>
            </li>
                  
      <li>
    
                          <a href="EntitySpecification.html" title="Entity Specification">
          <i class="none"></i>
        Entity Specification</a>
            </li>
                  
      <li>
    
                          <a href="falconcli/FalconCLI.html" title="Client (Falcon CLI)">
          <i class="none"></i>
        Client (Falcon CLI)</a>
            </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
      <li>
    
                          <a href="restapi/ResourceList.html" title="Rest API">
          <i class="icon-chevron-right"></i>
        Rest API</a>
                  </li>
                  
      <li>
    
                          <a href="HiveIntegration.html" title="Hive Integration">
          <i class="none"></i>
        Hive Integration</a>
            </li>
                  
      <li>
    
                          <a href="Extensions.html" title="Server side Extensions">
          <i class="none"></i>
        Server side Extensions</a>
            </li>
                  
      <li>
    
                          <a href="Security.html" title="Security">
          <i class="none"></i>
        Security</a>
            </li>
                              <li class="nav-header">Project Information</li>
                                
      <li>
    
                          <a href="project-info.html" title="Summary">
          <i class="none"></i>
        Summary</a>
            </li>
                  
      <li>
    
                          <a href="mail-lists.html" title="Mailing Lists">
          <i class="none"></i>
        Mailing Lists</a>
            </li>
                  
      <li>
    
                          <a href="http://webchat.freenode.net?channels=apachefalcon&uio=d4" class="externalLink" title="IRC">
          <i class="none"></i>
        IRC</a>
            </li>
                  
      <li>
    
                          <a href="team-list.html" title="Team">
          <i class="none"></i>
        Team</a>
            </li>
                  
      <li>
    
                          <a href="issue-tracking.html" title="Issue Tracking">
          <i class="none"></i>
        Issue Tracking</a>
            </li>
                  
      <li>
    
                          <a href="source-repository.html" title="Source Repository">
          <i class="none"></i>
        Source Repository</a>
            </li>
                  
      <li>
    
                          <a href="https://cwiki.apache.org/confluence/display/FALCON/Index" class="externalLink" title="Wiki">
          <i class="none"></i>
        Wiki</a>
            </li>
                  
      <li>
    
                          <a href="license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                  
      <li>
    
                          <a href="https://cwiki.apache.org/confluence/display/FALCON/News" class="externalLink" title="News">
          <i class="none"></i>
        News</a>
            </li>
                  
      <li>
    
                          <a href="https://cwiki.apache.org/confluence/display/FALCON/PoweredBy" class="externalLink" title="Powered by">
          <i class="none"></i>
        Powered by</a>
            </li>
                  
      <li>
    
                          <a href="https://cwiki.apache.org/confluence/display/FALCON/Acknowledgements" class="externalLink" title="Acknowledgements">
          <i class="none"></i>
        Acknowledgements</a>
            </li>
                  
      <li>
    
                          <a href="http://blogs.apache.org/falcon/" class="externalLink" title="Blog">
          <i class="none"></i>
        Blog</a>
            </li>
                              <li class="nav-header">Releases</li>
                                
      <li>
    
                          <a href="http://www.apache.org/dyn/closer.lua/falcon/0.11" class="externalLink" title="0.11">
          <i class="none"></i>
        0.11</a>
            </li>
                  
      <li>
    
                          <a href="http://www.apache.org/dyn/closer.lua/falcon/0.10" class="externalLink" title="0.10">
          <i class="none"></i>
        0.10</a>
            </li>
                  
      <li>
    
                          <a href="http://www.apache.org/dyn/closer.lua/falcon/0.9" class="externalLink" title="0.9">
          <i class="none"></i>
        0.9</a>
            </li>
                  
      <li>
    
                          <a href="http://www.apache.org/dyn/closer.lua/falcon/0.8" class="externalLink" title="0.8">
          <i class="none"></i>
        0.8</a>
            </li>
                  
      <li>
    
                          <a href="http://www.apache.org/dyn/closer.lua/falcon/0.7" class="externalLink" title="0.7">
          <i class="none"></i>
        0.7</a>
            </li>
                  
      <li>
    
                          <a href="http://archive.apache.org/dist/falcon/0.6.1" class="externalLink" title="0.6.1">
          <i class="none"></i>
        0.6.1</a>
            </li>
                  
      <li>
    
                          <a href="http://archive.apache.org/dist/incubator/falcon/0.6-incubating" class="externalLink" title="0.6-incubating">
          <i class="none"></i>
        0.6-incubating</a>
            </li>
                  
      <li>
    
                          <a href="http://archive.apache.org/dist/incubator/falcon/0.5-incubating" class="externalLink" title="0.5-incubating">
          <i class="none"></i>
        0.5-incubating</a>
            </li>
                  
      <li>
    
                          <a href="http://archive.apache.org/dist/incubator/falcon/0.4-incubating" class="externalLink" title="0.4-incubating">
          <i class="none"></i>
        0.4-incubating</a>
            </li>
                  
      <li>
    
                          <a href="http://archive.apache.org/dist/incubator/falcon/0.3-incubating" class="externalLink" title="0.3-incubating">
          <i class="none"></i>
        0.3-incubating</a>
            </li>
                  
      <li>
    
                          <a href="https://cwiki.apache.org/confluence/display/FALCON/Roadmap" class="externalLink" title="Coming soon">
          <i class="none"></i>
        Coming soon</a>
            </li>
                              <li class="nav-header">Documentation</li>
                                
      <li>
    
                          <a href="0.11/index.html" title="0.11 (Current)">
          <i class="none"></i>
        0.11 (Current)</a>
            </li>
                  
      <li>
    
                          <a href="0.10/index.html" title="0.10">
          <i class="none"></i>
        0.10</a>
            </li>
                  
      <li>
    
                          <a href="0.9/index.html" title="0.9">
          <i class="none"></i>
        0.9</a>
            </li>
                  
      <li>
    
                          <a href="0.8/index.html" title="0.8">
          <i class="none"></i>
        0.8</a>
            </li>
                  
      <li>
    
                          <a href="0.7/index.html" title="0.7">
          <i class="none"></i>
        0.7</a>
            </li>
                  
      <li>
    
                          <a href="0.6.1/index.html" title="0.6.1">
          <i class="none"></i>
        0.6.1</a>
            </li>
                  
      <li>
    
                          <a href="0.6-incubating/index.html" title="0.6-incubating">
          <i class="none"></i>
        0.6-incubating</a>
            </li>
                  
      <li>
    
                          <a href="0.5-incubating/index.html" title="0.5-incubating">
          <i class="none"></i>
        0.5-incubating</a>
            </li>
                  
      <li>
    
                          <a href="0.4-incubating/index.html" title="0.4-incubating">
          <i class="none"></i>
        0.4-incubating</a>
            </li>
                  
      <li>
    
                          <a href="0.3-incubating/index.html" title="0.3-incubating">
          <i class="none"></i>
        0.3-incubating</a>
            </li>
                              <li class="nav-header">ASF</li>
                                
      <li>
    
                          <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How Apache Works">
          <i class="none"></i>
        How Apache Works</a>
            </li>
                  
      <li>
    
                          <a href="http://www.apache.org/foundation/" class="externalLink" title="Foundation">
          <i class="none"></i>
        Foundation</a>
            </li>
                  
      <li>
    
                          <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsoring Apache">
          <i class="none"></i>
        Sponsoring Apache</a>
            </li>
                  
      <li>
    
                          <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
          <i class="none"></i>
        Thanks</a>
            </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>Hive Mirroring<a name="Hive_Mirroring"></a></h2></div>
<div class="section">
<h3>Overview<a name="Overview"></a></h3>
<p>Falcon provides feature to replicate Hive metadata and data events from source cluster to destination cluster. This is supported for both secure and unsecure cluster through Falcon extensions.</p></div>
<div class="section">
<h3>Prerequisites<a name="Prerequisites"></a></h3>
<p>Following is the prerequisites to use Hive Mirrroring</p>
<p></p>
<ul>
<li><b>Hive 1.2.0+</b></li>
<li><b>Oozie 4.2.0+</b></li></ul>
<p><b>Note:</b> Set following properties in hive-site.xml for replicating the Hive events on source and destination Hive cluster:</p>
<div class="source">
<pre>
    &lt;property&gt;
        &lt;name&gt;hive.metastore.event.listeners&lt;/name&gt;
        &lt;value&gt;org.apache.hive.hcatalog.listener.DbNotificationListener&lt;/value&gt;
        &lt;description&gt;event listeners that are notified of any metastore changes&lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;hive.metastore.dml.events&lt;/name&gt;
        &lt;value&gt;true&lt;/value&gt;
    &lt;/property&gt;

</pre></div></div>
<div class="section">
<h3>Use Case<a name="Use_Case"></a></h3>
<p>* Replicate data/metadata of Hive DB &amp; table from source to target cluster</p></div>
<div class="section">
<h3>Limitations<a name="Limitations"></a></h3>
<p>* Currently Hive doesn't support create database, roles, views, offline tables, direct HDFS writes without registering with metadata and Database/Table name mapping replication events. Hence Hive mirroring extension cannot be used to replicate above mentioned events between warehouses.</p></div>
<div class="section">
<h3>Usage<a name="Usage"></a></h3></div>
<div class="section">
<h4>Bootstrap<a name="Bootstrap"></a></h4>
<p>Perform initial bootstrap of Table and Database from source cluster to destination cluster</p>
<ul>
<li><b>Database Bootstrap</b></li></ul>For bootstrapping DB replication, first destination DB should be created. This step is expected,      since DB replication definitions can be set up by users only on pre-existing DB&#xe2;&#x80;&#x99;s. Second, Export all tables in      the source db and Import it in the destination db, as described in Table bootstrap.
<p></p>
<ul>
<li><b>Table Bootstrap</b></li></ul>For bootstrapping table replication, essentially after having turned on the DbNotificationListener      on the source db, perform an Export of the table, distcp the Export over to the destination      warehouse and do an Import over there. Check the following <a class="externalLink" href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+ImportExport">Hive Export-Import</a> for syntax details      and examples.      This will set up the destination table so that the events on the source cluster that modify the table      will then be replicated.</div>
<div class="section">
<h4>Setup source and destination clusters<a name="Setup_source_and_destination_clusters"></a></h4>
<div class="source">
<pre>
    $FALCON_HOME/bin/falcon entity -submit -type cluster -file /cluster/definition.xml
   
</pre></div></div>
<div class="section">
<h4>Hive mirroring extension properties<a name="Hive_mirroring_extension_properties"></a></h4>
<p>Extension artifacts are expected to be installed on HDFS at the path specified by &quot;extension.store.uri&quot; in startup properties. hive-mirroring-properties.json file located at &quot;&lt;extension.store.uri&gt;/hive-mirroring/META/hive-mirroring-properties.json&quot; lists all the required and optional parameters/arguments for scheduling Hive mirroring job.</p></div>
<div class="section">
<h4>Submit and schedule Hive mirroring extension<a name="Submit_and_schedule_Hive_mirroring_extension"></a></h4>
<div class="source">
<pre>
    $FALCON_HOME/bin/falcon extension -submitAndSchedule -extensionName hive-mirroring -file /process/definition.xml
   
</pre></div>
<p>Please Refer to <a href="./Falconcli/FalconCLI.html">Falcon CLI</a> and <a href="./Restapi/ResourceList.html">REST API</a> for more details on usage of CLI and REST API's.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2013-2018
                        <a href="http://www.apache.org">Apache Software Foundation</a>.
            All Rights Reserved.      
                    
      </div>

                          
        
                </div>
    </footer>
  </body>
</html>
