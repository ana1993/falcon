<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2018-03-12
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20180312" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Falcon - Distributed Mode</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<script type="text/javascript">$( document ).ready( function() { $( '.carousel' ).carousel( { interval: 3500 } ) } );</script>
          
            </head>
        <body class="topBarDisabled">
          
                        
                    
    
        <div class="container">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                                                                                                <img src="images/falcon-logo.png"  alt="Apache Falcon" width="200px" height="45px"/>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="index.html" title="Falcon">
        Falcon</a>
        </li>
      <li class="divider ">/</li>
        <li class="">Distributed Mode</li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2018-03-12</li> <li class="divider pull-right">|</li>
              <li id="projectVersion" class="pull-right">Version: 0.11</li>
            
                            </ul>
      </div>

      
                
        <div id="bodyColumn" >
                                  
            <div class="section">
<h2>Distributed Mode<a name="Distributed_Mode"></a></h2>
<p>Following are the steps needed to package and deploy Falcon in Embedded Mode. You need to complete Steps 1-3 mentioned  <a href="./InstallationSteps.html">here</a> before proceeding further.</p></div>
<div class="section">
<h3>Package Falcon<a name="Package_Falcon"></a></h3>
<p>Ensure that you are in the base directory (where you cloned Falcon). Let&#xe2;&#x80;&#x99;s call it {project dir}</p>
<div class="source">
<pre>
$mvn clean assembly:assembly -DskipTests -DskipCheck=true -Pdistributed,hadoop-2

</pre></div>
<div class="source">
<pre>
$ls {project dir}/distro/target/

</pre></div>
<p>It should give an output like below :</p>
<div class="source">
<pre>
apache-falcon-distributed-${project.version}-server.tar.gz
apache-falcon-distributed-${project.version}-sources.tar.gz
archive-tmp
maven-shared-archive-resources

</pre></div>
<p></p>
<ul>
<li>apache-falcon-distributed-${project.version}-sources.tar.gz contains source files of Falcon repo.</li></ul>
<p></p>
<ul>
<li>apache-falcon-distributed-${project.version}-server.tar.gz package contains project artifacts along with it's</li></ul>dependencies, configuration files and scripts required to deploy Falcon.
<p>Tar can be found in {project dir}/target/apache-falcon-distributed-${project.version}-server.tar.gz . This is the tar used for installing Falcon. Lets call it {falcon package}</p>
<p>Tar is structured as follows.</p>
<div class="source">
<pre>

|- bin
   |- falcon
   |- falcon-start
   |- falcon-stop
   |- falcon-status
   |- falcon-config.sh
   |- service-start.sh
   |- service-stop.sh
   |- service-status.sh
   |- prism-stop
   |- prism-start
   |- prism-status
|- conf
   |- startup.properties
   |- runtime.properties
   |- client.properties
   |- prism.keystore
   |- log4j.xml
   |- falcon-env.sh
|- docs
|- client
   |- lib (client support libs)
|- server
   |- webapp
      |- falcon.war
      |- prism.war
|- oozie
   |- conf
   |- libext
|- hadooplibs
|- README
|- NOTICE.txt
|- LICENSE.txt
|- DISCLAIMER.txt
|- CHANGES.txt

</pre></div></div>
<div class="section">
<h3>Installing &amp; running Falcon<a name="Installing__running_Falcon"></a></h3></div>
<div class="section">
<h4>Installing Falcon<a name="Installing_Falcon"></a></h4>
<p>Running Falcon in distributed mode requires bringing up both prism and server.As the name suggests Falcon prism splits the request it gets to the Falcon servers. It is a good practice to start prism and server with their corresponding configurations separately. Create separate directory for prism and server. Let's call them {falcon-prism-dir} and {falcon-server-dir} respectively.</p>
<p><b>For prism</b></p>
<div class="source">
<pre>
$mkdir {falcon-prism-dir}
$tar -xzvf {falcon package}

</pre></div>
<p><b>For server</b></p>
<div class="source">
<pre>
$mkdir {falcon-server-dir}
$tar -xzvf {falcon package}

</pre></div></div>
<div class="section">
<h4>Starting Prism<a name="Starting_Prism"></a></h4>
<div class="source">
<pre>
cd {falcon-prism-dir}/falcon-distributed-${project.version}
bin/prism-start [-port &lt;port&gt;]

</pre></div>
<p>By default, * prism server starts at port 16443. To change the port, use -port option</p>
<p>* falcon.enableTLS can be set to true or false explicitly to enable SSL, if not port that end with 443 will automatically put prism on <a class="externalLink" href="https://">https://</a></p>
<p>* prism starts with conf from {falcon-prism-dir}/falcon-distributed-${project.version}/conf. To override this (to use the same conf with multiple prism upgrades), set environment variable FALCON_CONF to the path of conf dir. You can find the instructions for configuring Falcon <a href="./Configuration.html">here</a>.</p>
<p><b>Enabling prism-client</b> *If prism is not started using default-port 16443 then edit the following property in {falcon-prism-dir}/falcon-distributed-${project.version}/conf/client.properties falcon.url=http://{machine-ip}:{prism-port}/</p></div>
<div class="section">
<h4>Starting Falcon Server<a name="Starting_Falcon_Server"></a></h4>
<div class="source">
<pre>
$cd {falcon-server-dir}/falcon-distributed-${project.version}
$bin/falcon-start [-port &lt;port&gt;]

</pre></div>
<p>By default, * If falcon.enableTLS is set to true explicitly or not set at all, Falcon starts at port 15443 on <a class="externalLink" href="https://">https://</a> by default.</p>
<p>* If falcon.enableTLS is set to false explicitly, Falcon starts at port 15000 on <a class="externalLink" href="http://.">http://.</a></p>
<p>* To change the port, use -port option.</p>
<p>* If falcon.enableTLS is not set explicitly, port that ends with 443 will automatically put Falcon on <a class="externalLink" href="https://.">https://.</a> Any other port will put Falcon on <a class="externalLink" href="http://.">http://.</a></p>
<p>* server starts with conf from {falcon-server-dir}/falcon-distributed-${project.version}/conf. To override this (to use the same conf with multiple server upgrades), set environment variable FALCON_CONF to the path of conf dir. You can find  the instructions for configuring Falcon <a href="./Configuration.html">here</a>.</p>
<p><b>Enabling server-client</b> *If server is not started using default-port 15443 then edit the following property in {falcon-server-dir}/falcon-distributed-${project.version}/conf/client.properties. You can find the instructions for configuring Falcon here. falcon.url=http://{machine-ip}:{server-port}/</p>
<p><b>NOTE</b> : https is the secure version of HTTP, the protocol over which data is sent between your browser and the website that you are connected to. By default Falcon runs in https mode. But user can configure it to http.</p></div>
<div class="section">
<h4>Using Falcon<a name="Using_Falcon"></a></h4>
<div class="source">
<pre>
$cd {falcon-prism-dir}/falcon-distributed-${project.version}
$bin/falcon admin -version
Falcon server build version: {Version:&quot;${project.version}-SNAPSHOT-rd7e2be9afa2a5dc96acd1ec9e325f39c6b2f17f7&quot;,
Mode:&quot;embedded&quot;}

$bin/falcon help
(for more details about Falcon cli usage)

</pre></div></div>
<div class="section">
<h4>Dashboard<a name="Dashboard"></a></h4>
<p>Once Falcon / prism is started, you can view the status of Falcon entities using the Web-based dashboard. You can open your browser at the corresponding port to use the web UI.</p>
<p>Falcon dashboard makes the REST api calls as user &quot;falcon-dashboard&quot;. If this user does not exist on your Falcon and Oozie servers, please create the user.</p>
<div class="source">
<pre>
## create user.
[root@falconhost ~] useradd -U -m falcon-dashboard -G users

## verify user is created with membership in correct groups.
[root@falconhost ~] groups falcon-dashboard
falcon-dashboard : falcon-dashboard users
[root@falconhost ~]

</pre></div></div>
<div class="section">
<h4>Stopping Falcon Server<a name="Stopping_Falcon_Server"></a></h4>
<div class="source">
<pre>
$cd {falcon-server-dir}/falcon-distributed-${project.version}
$bin/falcon-stop

</pre></div></div>
<div class="section">
<h4>Stopping Falcon Prism<a name="Stopping_Falcon_Prism"></a></h4>
<div class="source">
<pre>
$cd {falcon-prism-dir}/falcon-distributed-${project.version}
$bin/prism-stop

</pre></div></div>
                  </div>
          </div>

    <hr/>

    <footer>
            <div class="container">
              <div class="row span12">Copyright &copy;                    2013-2018
                        <a href="http://www.apache.org">Apache Software Foundation</a>.
            All Rights Reserved.      
                    
      </div>

                          
                <p id="poweredBy" class="pull-right">
                          <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
              </p>
        
                </div>
    </footer>
  </body>
</html>
